<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""
"http://www.w3.org/TR/html4/loose.dtd">
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <link rel="stylesheet" href="css/global.css" type="text/css" media="screen" charset="utf-8">
    <link rel="stylesheet" href="css/veyron-tree.css" type="text/css" media="screen" charset="utf-8">
    <script src="js/tangram-1.3.1.source.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/ecui-1.2.0-all.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/veyron.tree.js" type="text/javascript" charset="utf-8"></script>
    <title>Tree</title>
    <style type="text/css" media="screen">
        p {margin:.5em 0;color:#999}
        .info {margin:.5em 0;padding.5em;background-color:#DCEDFD;border:1px solid #4D6185;color:#4D6185}
    </style>
</head>
<body>

    <!-- tree 1 -->
    <div style="width:300px;float:left;margin-right:13px">
    <h3>Tree 1</h3>
    <p>单选</p>
    <div ecui="type:radio-tree;id:t1;name:part;value:1" class="veyron-radio-tree"> 
        <label><span class="tree-icon-a">节点的文本</span></label>
        <div ecui="value:2">
            <label><span class="tree-icon-a">节点的文本</span></label>
            <div ecui="value:3" data-async="true"><span class="tree-icon-b">子控件文本</span></div>
            <div ecui="value:4" data-async="true">
                <label><span class="tree-icon-b">节点的文本</span></label>
                <div ecui="value:44"><span class="tree-icon-c">子控件文本</span></div>
                <div ecui="value:45"><span class="tree-icon-d">子控件文本</span></div>
            </div>
            <div ecui="value:5"><span class="tree-icon-b">子控件文本</span></div>
        </div>
        <div ecui="value:6"><span class="tree-icon-b">子控件文本</span></div>
    </div>
    <div class="info" id="info1">信息</div>
    </div>
    

    <!-- tree 2 -->
    <div style="width:300px;float:left;margin-right:13px">
    <h3>Tree 2</h3>
    <p>多选, 颜色标识, 非联动</p>
    <div ecui="type:check-tree;id:t2;name:t2;value:1" class="veyron-check-tree">
        <label><span class="tree-icon-a">节点的文本</span></label>
        <div ecui="value:2">
            <label><span class="tree-icon-a">节点的文本</span></label>
            <div ecui="value:3;" data-async="true"><span class="tree-icon-b">子控件文本</span></div>
            <div ecui="value:4">
                <label><span class="tree-icon-b">节点的文本</span></label>
                <div ecui="value:44"><span class="tree-icon-d">子控件文本</span></div>
                <div ecui="value:45"><span class="tree-icon-d">子控件文本</span></div>
            </div>
            <div ecui="value:5"><span class="tree-icon-c">子控件文本</span></div>
        </div>
        <div ecui="value:6"><span class="tree-icon-b">子控件文本</span></div>
    </div>
    <div class="info" id="info2">信息</div>
    </div>
    

    <!-- tree 3 -->
    <div style="width:300px;float:left">
    <h3>Tree 3</h3>
    <p>多选, 联动</p>
    <div ecui="type:check-tree;id:t3;name:part;superior:true;value:1" class="veyron-check-tree">
        <label><span class="tree-icon-a">节点的文本</span></label>
        <div ecui="value:2">
            <label><span class="tree-icon-a">节点的文本</span></label>
            <div ecui="value:3" data-async="true"><span class="tree-icon-b">子控件文本</span></div>
            <div ecui="value:4">
                <label><span class="tree-icon-b">节点的文本</span></label>
                <div ecui="value:44"><span class="tree-icon-d">子控件文本</span></div>
                <div ecui="value:45"><span class="tree-icon-d">子控件文本</span></div>
            </div>
            <div ecui="value:5"><span class="tree-icon-c">子控件文本</span></div>
        </div>
        <div ecui="value:6"><span class="tree-icon-b">子控件文本</span></div>
    </div>
    <div class="info" id="info3">信息</div>
    </div> 
   
<script type="text/javascript" charset="utf-8">
    
    // tree1 点击绑定
    ecui.get('t1').onnodeclick = function (event) {
        document.getElementById('info1').innerHTML = '值:' + this.getValue();    
    };
    
    // tree1 加号点击
    ecui.get('t1').loadChildren = function () {
        var node = this;
        baidu.ajax.post('/veyron/getChildTree', '', function (xhr, res) {
            setTimeout(function () {
                node.insertChildTree(res);
            }, 3000)
        });
    };

    // tree2 [必须]点击展示颜色块
    ecui.get('t2').onnodecheck = function () {
        var root = this.getRoot();
        var lenLimit = root.colorSet.length;
        if (root.getCheckedValue().length < lenLimit || this.isChecked()) {
            var color = this.setColorLegend(this.isChecked());
        }
        else {
            alert('最多选择' + lenLimit + '个');
            return false;
        }
    };

    // tree2 异步载入子节点
    ecui.get('t2').loadChildren = function () {
        var node = this;
        baidu.ajax.post('/veyron/getChildTree', '', function (xhr, res) {
            setTimeout(function () {
                node.insertChildTree(res);
            }, 2000);
        });
    };

    ecui.get('t2').onnodeclick = function (event) {
        document.getElementById('info2').innerHTML = [
            '值:' + this.getValue(),
            '颜色:' + this.getColor(),
            '是否选中:' + this.isChecked()
        ].join(';') 
        + '<br/>已选值:'
        + this.getRoot().getCheckedValue().join();
    };
    
    ecui.get('t3').onnodeclick = function (event) {
        document.getElementById('info3').innerHTML = [
            '值:' + this.getValue(),
            '是否选中:' + this.isChecked()
        ].join(';') 
        + '<br/>已选值:'
        + this.getRoot().getCheckedValue().join();
    };
    // tree3 异步载入子节点
    ecui.get('t3').loadChildren = function () {
        var node = this;
        baidu.ajax.post('/veyron/getChildTree', '', function (xhr, res) {
            node.insertChildTree(res);
        });
    };

    
</script>
</body>
